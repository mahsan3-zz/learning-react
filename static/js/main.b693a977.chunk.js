(this["webpackJsonplearning-react"]=this["webpackJsonplearning-react"]||[]).push([[0],{63:function(e,t,a){e.exports=a(79)},68:function(e,t,a){},69:function(e,t,a){},75:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(37),o=a.n(r),l=(a(68),a(69),a(29));var s=a(11),i=a(60),m=a(82),u=a(6),f=a.n(u);function p(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],o=a[1],l=Object(n.useRef)(null);Object(n.useEffect)((function(){Object(m.a)(l.current,"keyup").subscribe((function(e){console.log(e.key),console.log(e.target.value)}))}),[]);return c.a.createElement("form",{className:"",onSubmit:function(t){t.preventDefault(),console.log(r),e.updateSearchResults(r)},autoComplete:"off"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"searchInput"},"Search security by name"),c.a.createElement("input",{type:"text",className:"form-control",id:"searchInput",onChange:function(e){return o(e.target.value)},ref:l}),c.a.createElement("small",{id:"searchHelp",className:"form-text text-muted"},"Example: search by company name or stock symbol")),c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Search"))}p.propType={updateSearchResults:f.a.func.isRequired};var d=a(23);a(75);function b(e){return c.a.createElement("div",{className:"list-group"},e.securitiesList.length>0?e.securitiesList.map((function(t){return c.a.createElement("div",{className:"list-group-item list-group-item-action",key:t["1. symbol"]},c.a.createElement("div",{className:"d-flex w-100 justify-content-between"},c.a.createElement("h5",{className:"mb-1"},t["1. symbol"]),c.a.createElement("small",null,t["2. name"])),c.a.createElement("div",{className:"d-flex w-100 justify-content-between"},c.a.createElement("p",{className:"mb-1"},"Type: ",t["3. type"]," | Currency: ",t["8. currency"]),c.a.createElement("img",{className:"fav-icon selected",src:t.isFavorite?"icons/heart-fill.svg":"icons/heart.svg",alt:"",width:"32",height:"32",title:"Add to favorites list",onClick:function(){return e.toggleFav(t["1. symbol"],t.isFavorite)}})))})):c.a.createElement("small",null,"No results to show"))}function E(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"jumbotron p-2"},c.a.createElement("h1",{className:"display-4"},"Securities Search"),c.a.createElement("div",{className:"d-flex justify-content-between flex-wrap"},c.a.createElement("p",{className:"lead"},"Simple React application that integrates with the ",c.a.createElement("a",{href:"https://www.alphavantage.co",target:"_blank"},"Alphavantage API")),c.a.createElement(l.b,{to:"/favorites"},c.a.createElement("button",{type:"button",className:"btn btn-outline-primary"},"My Favorites (",e.totalFavorites,")"))),c.a.createElement("hr",{className:"my-4"}),c.a.createElement(p,{updateSearchResults:function(t){console.log("The query is ".concat(t)),e.search(t)}})),c.a.createElement("div",{className:"row flex-column align-items-center mb-4"},c.a.createElement("div",{className:"col col-md-8 col-lg-6 text-center justify-content-center"},e.isLoading?c.a.createElement("span",null,"...Loading..."):c.a.createElement(b,{securitiesList:e.securitiesList,toggleFav:function(t,a){console.log("You just favorited ".concat(t," and fav status is ").concat(a)),a?e.unfavSymbol(t):e.favSymbol(t)}}))))}var h=E=Object(d.b)((function(e){return{totalFavorites:e.searchReducer.favSymbols.length,securitiesList:e.searchReducer.searchResults.map((function(t){return Object(s.a)({},t,{isFavorite:e.searchReducer.favSymbols.includes(t["1. symbol"])})})),isLoading:e.searchReducer.isLoading}}),(function(e){return{search:function(t){return e(function(e){return{type:"SEARCH_SECURITIES",payload:{q:e}}}(t))},favSymbol:function(t){return e({type:"FAVORITE_SYMBOL",payload:t})},unfavSymbol:function(t){return e({type:"UNFAVORITE_SYMBOL",payload:t})}}}))(E),y=a(27),g=a(19),v=a(20),O=a(24),S=a(21),N=a(25),j=a(41),R=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).state={coffeeObj:e.coffeeItem,selected:!1},a.toggleLike=a.toggleLike.bind(Object(j.a)(a)),a}return Object(N.a)(t,e),Object(v.a)(t,[{key:"toggleLike",value:function(){this.setState((function(e){return{selected:!e.selected}}))}},{key:"render",value:function(){return c.a.createElement("div",{className:"card"},c.a.createElement("img",{src:this.state.coffeeObj.image,className:"card-img-top",alt:"coffee :P"}),c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"card-title"},this.state.coffeeObj.name),c.a.createElement("p",{className:"card-text"},this.state.coffeeObj.description),c.a.createElement("button",{className:"btn btn-primary",onClick:this.toggleLike},"Like ",this.state.selected?c.a.createElement("img",{src:"icons/check.svg",alt:"",width:"32",height:"32",title:"check"}):"")))}}]),t}(c.a.Component),w=(c.a.Component,a(39)),L=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).onFieldChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value)),console.log(a.state)},a.emitFormValues=function(){a.props.parentalUnit(a.state),a.setState({itemName:"",itemDescription:""})},a.state={itemName:"",itemDescription:""},a}return Object(N.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"item-name"},"Item Name"),c.a.createElement("input",{type:"text",className:"form-control",id:"item-name",name:"itemName",value:this.state.itemName,onChange:this.onFieldChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"item-description"},"Short Description"),c.a.createElement("textarea",{rows:"3",type:"text",className:"form-control",id:"item-description",name:"itemDescription",value:this.state.itemDescription,onChange:this.onFieldChange})),c.a.createElement("button",{type:"button",className:"btn btn-success float-right",onClick:this.emitFormValues},"Submit"))}}]),t}(c.a.Component),C=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(O.a)(this,Object(S.a)(t).call(this,e))).onSubmitHandler=function(e){console.log("Hail destroyer..."),console.log(a.props),a.props.addItem(e)},a}return Object(N.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"Add a new item"),c.a.createElement(L,{parentalUnit:this.onSubmitHandler}),c.a.createElement("h4",null,"List of items in store"),c.a.createElement("ul",null,this.props.items.map((function(e,t){return c.a.createElement("li",{key:t},c.a.createElement("p",null,e.itemName),c.a.createElement("p",null,e.itemDescription))})))))}}]),t}(c.a.Component),I=Object(d.b)((function(e){return{items:e.coffeeItems}}),(function(e){return{addItem:function(t){e({type:"ADD_COFFEE",payload:{coffeeItem:t}})}}}))(C);var _=function(e){return c.a.createElement("li",{className:"list-group-item"},"Symbol: ",e.symbol,e.isLoading?c.a.createElement("div",{className:"spinner-border",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")):c.a.createElement("div",null,"Price: $",e.price," | ",c.a.createElement("span",{style:{color:e.changeColor}},"Change: $",e.change)))};function F(e){return Object(n.useEffect)((function(){e.favSymbols.forEach((function(t){return e.getFavPrice(t)}))}),[]),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"}),c.a.createElement("div",{className:"col-12"},c.a.createElement("ul",{className:"list-group"},e.symbolQuotes.map((function(e,t){return c.a.createElement(_,{key:t,symbol:e.symbol,price:e.price,change:e.change,changeColor:e.changeColor})})))))}var k=F=Object(d.b)((function(e){return{favSymbols:e.searchReducer.favSymbols,symbolQuotes:e.searchReducer.symbolQuotes,isLoading:e.searchReducer.isLoading}}),(function(e){return{getFavPrice:function(t){return e({type:"GET_FAVORITE_SYMBOL_PRICE",payload:t})}}}))(F);var T=function(){return c.a.createElement(l.a,{basename:"/learning-react"},c.a.createElement("div",{className:"container h-100"},c.a.createElement("div",{className:"d-flex flex-column h-100"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col col-12"})),c.a.createElement("div",{className:"row flex-grow-1 pt-2"},c.a.createElement("div",{className:"col col-12"},c.a.createElement(y.a,{exact:!0,path:"/",component:h}),c.a.createElement(y.a,{exact:!0,path:"/favorites",component:k}),c.a.createElement(y.a,{exact:!0,path:"/new-coffee-item",component:I}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=a(26),x=a(85),D=a(35),U={coffeeItems:[]};var P={symbolQuotes:[],favSymbols:[],isLoading:!1,searchResults:[]};function B(e){return e?"-"===e[0]?"red":"green":"black"}var M=a(62),Y=a(61),Q=a(30),V=a(83),H=a(86),q=Object(x.a)((function(e){return e.pipe(Object(M.a)("SEARCH_SECURITIES"),Object(Y.a)((function(e){return H.a.getJSON("https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=".concat(e.payload.q,"&apikey=4377OTF76Z8U0DNW")).pipe(Object(Q.a)((function(e){return{type:"UPDATE_SECURITIES_RESULT",payload:e.bestMatches}})))})))}),(function(e){return e.pipe(Object(M.a)("GET_FAVORITE_SYMBOL_PRICE"),Object(V.a)((function(e){console.log(e)})),Object(Y.a)((function(e){return H.a.getJSON("https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=".concat(e.payload,"&apikey=4377OTF76Z8U0DNW")).pipe(Object(Q.a)((function(e){return console.log(e),{type:"UPDATE_SYMBOL_PRICE",payload:e["Global Quote"]}})))})))})),G=Object(A.c)({appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COFFEE":return Object(s.a)({},e,{coffeeItems:[].concat(Object(D.a)(e.coffeeItems),[t.payload.coffeeItem])});default:return e}},searchReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_SECURITIES":return Object(s.a)({},e,{searchResults:[],isLoading:!0});case"UPDATE_SECURITIES_RESULT":return Object(s.a)({},e,{isLoading:!1,searchResults:t.payload});case"FAVORITE_SYMBOL":return Object(s.a)({},e,{favSymbols:[].concat(Object(D.a)(e.favSymbols),[t.payload])});case"UNFAVORITE_SYMBOL":return Object(s.a)({},e,{favSymbols:e.favSymbols.filter((function(e){if(t.payload!==e)return e}))});case"GET_FAVORITE_SYMBOL_PRICE":return Object(s.a)({},e,{symbolQuotes:[].concat(Object(D.a)(e.symbolQuotes),[{symbol:t.payload,isLoading:!0,price:0,change:0,changeColor:""}])});case"UPDATE_SYMBOL_PRICE":return Object(s.a)({},e,{symbolQuotes:e.symbolQuotes.map((function(e){return e.symbol===t.payload["01. symbol"]?Object(s.a)({},e,{isLoading:!1,price:t.payload["05. price"],change:t.payload["09. change"],changeColor:B(t.payload["09. change"])}):e}))});default:return e}}}),J=a(84),W=a(58),$=a.n(W),X=Object(J.a)();var Z=function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||A.d,a=Object(A.e)(G,e,t(Object(A.a)($()(),X)));return X.run(q),a}();o.a.render(c.a.createElement(d.a,{store:Z},c.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[63,1,2]]]);
//# sourceMappingURL=main.b693a977.chunk.js.map